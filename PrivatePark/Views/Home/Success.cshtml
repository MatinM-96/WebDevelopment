@using mnacr22.Data
@using Microsoft.EntityFrameworkCore
@inject ApplicationDbContext _db
@{
    ViewBag.Title = "Success";
    Layout = "_Layout";
}

<!DOCTYPE html>
<html>
<head>
  <title>Thanks for your order!</title>
</head>
<body>
<section>
  <p>
    We appreciate your business! If you have any questions, please email
    <a href="mailto:orders@example.com">mnacr22@privatepark.com</a>.
    <a></a>
    <div>Information about booked parkingspot:</div>
    <p></p>
    @{
      int parkId = ViewBag.ParkId;

      var park = _db.Parkerings.FirstOrDefault(a => a.Id == parkId);
      
      <div>Street: @park.Address.Street</div>
      <div>City: @park.Address.City</div>
      <div>Zip: @park.Address.ZiptCode</div>
      <div>Renter: @park.Renter.Firstname @park.Renter.Lastname</div>
      <div>Rented from: @park.StartTime</div>
      <div>Rented until: @park.EndTime</div>
      <div>Price paid: @park.PricePaid NOK</div>
      <div>Vehicle: @park.Car</div>
    }
  </p>
  @{
    if (park.Renter != park.Rentee)
    {
      @using (Html.BeginForm("Index", "Chat", FormMethod.Post))
      {
        <div class="row">
          <div class="col-md-6">
            <div>Have any questions about your booked parkingspot?</div>
            <div class="form-floating">
              <input id="username" name="username" type="text" value="@park.Renter.Email" class="form-control" hidden/>
              <span class="text-danger"></span>
            </div>
            <button id="update-profile-button" type="submit" class="w-100 btn btn-lg btn-primary">Send a message to the renter</button>
          </div>
        </div> 
      }
    }
  }
</section>
</body>
</html>